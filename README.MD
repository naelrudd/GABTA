# ğŸ“š GABTA - Sistem Presensi QR Code + GPS

**GABTA** (Geolocation-Based Attendance Tracking Application) adalah sistem presensi berbasis web dengan QR Code scanning dan validasi lokasi GPS. Tanpa perlu install aplikasi mobile.

**Quick Links:**
- ğŸ“– [Panduan Instalasi Lengkap](PANDUAN_INSTALASI.md) - Bahasa Indonesia
- ğŸ“§ [Setup Email (Mailtrap)](SETUP_MAILTRAP.md) - 5 menit
- ğŸ–¥ï¸ [One-Click Installer](setup-windows.bat) - Windows .bat file

## âœ¨ Fitur Utama

### ğŸ“ Untuk Dosen/Admin:
- âœ… **Create Session** dengan radius kustom (10-1000m), nama kelas, kode kelas, dan kapasitas maksimal
- âœ… **QR Code Display** dengan auto-refresh setiap 30 detik (centered & large display)
- âœ… **Dashboard** dengan grouping session per kelas
- âœ… **Class Management** untuk melihat rekap per kelas dengan detail setiap pertemuan
- âœ… **Edit Attendance** secara manual dengan catatan/alasan
- âœ… **Export to Excel** dengan data lengkap (NIM/NIP, Nama, Email, Status)
- âœ… **Participant List** dengan NIM, nama lengkap, email, waktu presensi
- âœ… **Capacity Tracking** untuk monitor batas peserta kelas

### ğŸ‘¨â€ğŸ“ Untuk Mahasiswa:
- âœ… **Browser-Based QR Scanning** tanpa perlu install app (menggunakan HTML5 QR Code)
- âœ… **Manual Token Entry** sebagai fallback
- âœ… **GPS Location Validation** otomatis saat scan
- âœ… **Profile Page** dengan edit nama, statistik per kelas, dan riwayat kehadiran
- âœ… **Real-time Status** (Hadir/Terlambat/Tidak Hadir)

### ğŸ” Authentication & Security:
- âœ… **Email Verification** dengan auto-send verification email
- âœ… **Auto-Login** setelah verifikasi email berhasil
- âœ… **NIM/NIP Registration** untuk identifikasi mahasiswa dan dosen
- âœ… **Auto Role Assignment** berdasarkan email domain (@students.um.ac.id)
- âœ… **JWT Authentication** dengan expiry token
- âœ… **Password Hashing** menggunakan bcrypt

### ğŸ“Š Backend API:
- âœ… **RESTful API** dengan JWT authentication
- âœ… **Dynamic Radius Validation** (10m - 1000m per session)
- âœ… **Token System** dengan expiry 30 detik untuk keamanan
- âœ… **Distance Calculation** menggunakan Haversine formula
- âœ… **Email Service** untuk verification dan welcome emails
- âœ… **Multi-Class Support** dengan className dan kodeKelas
- âœ… **Capacity Management** untuk limit peserta per session

## ğŸ—ï¸ Tech Stack

**Backend:**
- Node.js 22.15.0 + Express.js
- PostgreSQL + Sequelize ORM 6.37.7
- JWT Authentication
- bcrypt untuk password hashing
- nodemailer untuk email verification
- QRCode untuk generate QR images
- crypto untuk token generation

**Web Frontend:**
- React 17.0.2
- React Router v6
- React Bootstrap 2.2.1
- Formik + Yup (form validation)
- Axios (API calls)
- html5-qrcode (browser QR scanning)
- xlsx (Excel export)
- Bootstrap Icons

**Database Schema:**
- Users (dengan NIM/NIP, email verification)
- Roles (participant, committee, admin)
- Sessions (dengan kodeKelas, maxCapacity)
- AttendanceRecords (dengan notes, updatedBy)

## ğŸš€ Quick Start

### One-Click Setup (Windows)
```powershell
# Double-click file ini:
setup-windows.bat
```

Script otomatis install dependencies, setup database, dan start servers.

### Manual Setup (Semua OS)
Ikuti panduan lengkap: **[PANDUAN_INSTALASI.md](PANDUAN_INSTALASI.md)**

**TL;DR:**
```bash
# 1. Install dependencies
cd server && npm install
cd ../web && npm install

# 2. Setup database & env
createdb gabta_db
cd server && copy .env.example .env
# Edit .env (DB, JWT, EMAIL) - Lihat SETUP_MAILTRAP.md

# 3. Migrate & seed
npx sequelize-cli db:migrate
npx sequelize-cli db:seed:all

# 4. Start servers
npm run dev              # backend (port 5000)
cd ../web && npm start   # frontend (port 3000)

```

## ğŸ§ª Test Credentials

**Dosen (Admin):**
- Email: `admin@gabta.com`
- Password: `admin123`

**Mahasiswa:**
- Register di http://localhost:3000/register
- Email: `test@students.um.ac.id` (auto-assign role mahasiswa)
- Check Mailtrap untuk verification email

## ğŸ“– Dokumentasi

### Setup & Installation
- [PANDUAN_INSTALASI.md](PANDUAN_INSTALASI.md) - Panduan lengkap Bahasa Indonesia
- [SETUP_MAILTRAP.md](SETUP_MAILTRAP.md) - Setup email testing (5 menit)
- [setup-windows.bat](setup-windows.bat) - One-click installer Windows

### Fitur & Testing
- [TESTING_GUIDE.md](TESTING_GUIDE.md) - Test semua fitur end-to-end
- [TESTING_SWAGGER.md](TESTING_SWAGGER.md) - Test API via Swagger UI
- [CHANGELOG.md](CHANGELOG.md) - Riwayat perubahan versi

### Mobile App (Optional)
- [MOBILE_SETUP_GUIDE.md](MOBILE_SETUP_GUIDE.md) - Setup React Native
- [QUICK_START_MOBILE.md](QUICK_START_MOBILE.md) - Quick start mobile
- [MOBILE_ARCHITECTURE.md](MOBILE_ARCHITECTURE.md) - Arsitektur mobile app
- [MOBILE_IMPLEMENTATION_SUMMARY.md](MOBILE_IMPLEMENTATION_SUMMARY.md) - Detail implementasi

### Technical Details
- [IMPLEMENTATION_SUMMARY.md](IMPLEMENTATION_SUMMARY.md) - Detail implementasi fitur

## ğŸ—ï¸ Struktur Folder

```
GABTA/
â”œâ”€â”€ server/              # Backend (Node.js + Express)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/ # API handlers
â”‚   â”‚   â”œâ”€â”€ models/      # Database models
â”‚   â”‚   â”œâ”€â”€ routes/      # API routes
â”‚   â”‚   â”œâ”€â”€ services/    # Business logic
â”‚   â”‚   â””â”€â”€ middlewares/ # Auth & error handlers
â”‚   â”œâ”€â”€ migrations/      # DB migrations
â”‚   â””â”€â”€ seeders/        # Seed data
â”œâ”€â”€ web/                # Frontend (React)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/       # Page components
â”‚       â”œâ”€â”€ components/  # Reusable UI
â”‚       â”œâ”€â”€ context/     # State management
â”‚       â””â”€â”€ services/    # API calls
â””â”€â”€ mobile/             # React Native (optional)
    â””â”€â”€ src/
        â”œâ”€â”€ screens/     # Mobile screens
        â””â”€â”€ navigation/  # Navigation config

### Web
- React (CRA)
- React Router
- Axios

### Mobile
- React Native
```

## ğŸ¤ Contributing

1. Fork repository
2. Create feature branch: `git checkout -b feature/AmazingFeature`
3. Commit changes: `git commit -m 'Add AmazingFeature'`
4. Push to branch: `git push origin feature/AmazingFeature`
5. Open Pull Request

## ğŸ“ License

MIT License - Lihat [LICENSE](LICENSE) untuk detail

## ğŸ‘¥ Team

Developed by **Nael Rudd** - [naelrudd](https://github.com/naelrudd)

GitHub Repository: [https://github.com/naelrudd/GABTA](https://github.com/naelrudd/GABTA)

## ğŸ› Troubleshooting

**Port sudah dipakai:**
```powershell
netstat -ano | findstr :5000
taskkill /PID <PID> /F
```

**Database connection error:**
- Pastikan PostgreSQL running
- Check credentials di `.env`

**Email tidak terkirim:**
- Check Mailtrap credentials
- Restart backend setelah update `.env`

**Frontend tidak connect ke backend:**
- Pastikan backend running di port 5000
- Check CORS_ORIGIN di `.env`

Lihat [PANDUAN_INSTALASI.md](PANDUAN_INSTALASI.md) untuk troubleshooting lengkap.